#!/bin/bash

docker -v

apt-get -y update
apt-get install -y curl
apt-get install -y --only-upgrade docker-ee

#systemctl restart docker

docker -v
docker version

echo $DOCKER_EE_VERSION

apt-cache madison docker-ee

docker -v

DOCKER_CLI_EXPERIMENTAL=enable
export DOCKER_BUILDKIT=1

docker buildx -v

git clone git://github.com/docker/buildx && cd buildx
make install

docker buildx help

#apt-get remove -y docker docker-engine docker-ce docker-ce-cli docker.io docker-ee docker-ce

#apt-get update
#apt-get -y install wget

#wget -O docker-ce.deb https://download.docker.com/linux/ubuntu/dists/xenial/pool/stable/amd64/docker-ce_19.03.5~3-0~ubuntu-xenial_amd64.deb

#dpkg -i docker-ce.deb

#apt-get install -y \
#    apt-transport-https \
#    ca-certificates \
#    curl \
#    gnupg-agent \
#    software-properties-common \
#    wget

#curl -fsSL https://download.docker.com/linux/ubuntu/gpg | apt-key add -

#add-apt-repository \
   "deb [arch=amd64] https://download.docker.com/linux/ubuntu \
   $(lsb_release -cs) \
   stable"

#apt-get update

#apt-cache madison docker-ce

#apt-get install -y docker-ce docker-ce-cli containerd.io

#docker -v
#export DOCKER_BUILDKIT=1
#wget -O docker-buildx https://github.com/docker/buildx/releases/download/v0.3.1/buildx-v0.3.1.linux-arm64
#cp docker-buildx ~/.docker/cli-plugins
#chmod a+x ~/.docker/cli-plugins/docker-buildx

#docker buildx info

docker run --rm --privileged multiarch/qemu-user-static --reset -p yes
docker buildx create --name xbuilder
docker buildx use xbuilder
docker buildx inspect --bootstrap